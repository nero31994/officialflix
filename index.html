<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie & TV Hub</title>
    <script src="https://cdn.tailwindcss.com/"></script>
    <script src="https://futuristic-six.vercel.app/jrv.js"></script>
    <script src="https://futuristic-six.vercel.app/jwr.js"></script>
    <script src="https://futuristic-six.vercel.app/cls.js"></script>
    <script src="https://futuristic-six.vercel.app/remote.js"></script>
    <link href="all.min.css" rel="stylesheet">

    <style>
        body { font-family: Arial, sans-serif; background: #121212; color: white; text-align: center; }
        .tab-buttons { display: flex; justify-content: center; gap: 20px; margin: 20px 0; }
        .tab-button { padding: 10px 20px; cursor: pointer; border: none; background: gray; color: white; border-radius: 5px; transition: 0.3s; }
        .tab-button:hover, .active-tab { background: white; color: black; }
        .tab-content { display: none; padding: 20px; }
        .grid { display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; }
        .movie, .channel-card { width: 150px; cursor: pointer; transition: 0.3s; }
        .movie:hover, .channel-card:hover { transform: scale(1.05); }
        .movie img, .channel-logo { width: 100%; border-radius: 8px; }
    </style>
</head>
<body>

    <!-- Navigation Tabs -->
    <div class="tab-buttons">
        <button class="tab-button active-tab" onclick="switchTab('movieSection')">Movies</button>
        <button class="tab-button" onclick="switchTab('tvSection')">NERO TV</button>
    </div>

    <!-- MOVIE SITE -->
    <div id="movieSection" class="tab-content" style="display: block;">
        <h1>Movie Site</h1>
        <input type="text" id="searchMovies" placeholder="Search movies..." oninput="searchMovies()">
        <div id="movies" class="grid"></div>
    </div>

    <!-- NERO TV -->
    <div id="tvSection" class="tab-content">
        <h1>NERO TV</h1>
        <div class="search-container">
            <input type="text" id="searchChannels" class="search-bar" placeholder="Search channels..." oninput="filterChannels()">
        </div>
        <div class="grid" id="channelGrid"></div>
    </div>

    <script>
        // Tab Switcher
        function switchTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.style.display = "none");
            document.getElementById(tabId).style.display = "block";
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active-tab'));
            event.target.classList.add('active-tab');
        }

        // MOVIE SITE FUNCTIONALITY
        const API_KEY = '488eb36776275b8ae18600751059fb49';
        const IMG_URL = 'https://image.tmdb.org/t/p/w500';
        const PROXY_URL = 'https://officialflix.vercel.app/api/proxy?id=';

        async function fetchMovies(url) {
            const res = await fetch(url);
            const data = await res.json();
            displayMovies(data.results);
        }

        function displayMovies(movies) {
            const moviesDiv = document.getElementById("movies");
            moviesDiv.innerHTML = "";
            movies.forEach(movie => {
                const movieEl = document.createElement("div");
                movieEl.classList.add("movie");
                movieEl.innerHTML = `<img src="${IMG_URL}${movie.poster_path}" alt="${movie.title}"><p>${movie.title}</p>`;
                movieEl.onclick = () => window.open(`${PROXY_URL}${movie.id}`, "_blank");
                moviesDiv.appendChild(movieEl);
            });
        }

        function searchMovies() {
            const query = document.getElementById("searchMovies").value;
            if (query.length > 2) {
                fetchMovies(`https://api.themoviedb.org/3/search/movie?api_key=${API_KEY}&query=${query}`);
            } else {
                fetchMovies(`https://api.themoviedb.org/3/movie/popular?api_key=${API_KEY}`);
            }
        }

        // Load popular movies on page load
        fetchMovies(`https://api.themoviedb.org/3/movie/popular?api_key=${API_KEY}`);

        // NERO TV FUNCTIONALITY
        const channels = {
            1: { name: "Channel 1", logo: "https://via.placeholder.com/100", url: "https://example.com/stream1.m3u8", type: "hls" },
            2: { name: "Channel 2", logo: "https://via.placeholder.com/100", url: "https://example.com/stream2.mpd", type: "mpd", keyId: "123", key: "abc" }
        };

        function filterChannels() {
            const searchInput = document.getElementById('searchChannels').value.toLowerCase();
            document.querySelectorAll('.channel-card').forEach(card => {
                const channelName = card.querySelector('h3').textContent.toLowerCase();
                card.style.display = channelName.includes(searchInput) ? 'flex' : 'none';
            });
        }

        function populateChannelCards() {
            const container = document.getElementById('channelGrid');
            container.innerHTML = "";
            Object.keys(channels).forEach(key => {
                const channel = channels[key];
                const card = document.createElement('div');
                card.classList.add('channel-card');
                card.innerHTML = `<img src="${channel.logo}" class="channel-logo"><h3>${channel.name}</h3>`;
                card.onclick = () => loadStream(key);
                container.appendChild(card);
            });
        }

        function loadStream(channelKey) {
            const channel = channels[channelKey];
            if (!channel) return;
            alert(`Playing: ${channel.name}\nURL: ${channel.url}`);
        }

        // Load TV Channels
        populateChannelCards();
    </script>

</body>
</html>
